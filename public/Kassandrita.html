<!DOCTYPE html>
<meta name = "viewport" content = "width = device-width, initial-scale = 1.0">
<html>
	<head>
		<title>Kassandrita</title>

    <link rel="shortcut icon" href="./hearttrack/images/Kassandrita.png">
    <link href="./hearttrack/stylesheets/Kassandrita.css" rel="stylesheet">
    <script src="./hearttrack/javascripts/Kassandrita.js"></script>
    <!-- Import jQuery -->
    <script type="text/javascript" src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
	</head>
	<body>
    <div id="page">
      <div class="textbox">
        <h2>Hola amorcito,</h2>

        <p>
          &nbsp&nbsp&nbsp&nbspEstos días que he estado apartado de ti han sido muy tristes.
          Te extraño muchísimo y no puedo dejar de pensar en ti todo el tiempo.
          Ya quiero volver a verte y quiero ganarme tu perdón. Yo se que me pediste que te diera tiempo
          y por eso quise hacerte este pequeño detalle de un ingeniero a una hermosa interpreta que es muy buena
          con química (solo una de sus muchas bellas cualidades valiosas). Quiero decirte que desde el fondo de mi
          corazón he estado intentando ver el pasado nuestro desde tus zapatos, y siento que fui muy frio é
          incomprensivo. He cometido muchos errores en nuestra relación pero enamorarme de ti no es uno, y soy muy
          afortunado de haber estado sentado aquella tarde de Octubre del 2017 a tu lado. Yo se que en este momento
          no quieres saber de mi, pero quiero tomar acción y poder volver a verte y compartir este hermoso sentimiento
          que me unió a ti.
          <br>
          &nbsp&nbsp&nbsp&nbspEsta no es una carta formal, simplemente una invitación (la carta la escribí físicamente).
          Tengo un pequeño detalle que quiero obsequiarte y por eso quería invitarte a Hermosillo conmigo el próximo
          fin de semana. Me encantaría pasar el tiempo que tengas disponible ese fin de semana y quizás podamos festejar
          mi cumpleaños yendo a cenar juntos. No se si estés en Tucson o Agua Prieta pero pudiera ir por ti en
          shuttle para enseñarte a conducir en carretera de regreso antes de agarrar camino o un día antes.
        </p>

        <h2>Quisieras acompañarme?</h2>

        <div class="Button">

          <button id="respuestaSi" class="largeButton">Si</button>
          <button id="respuestaNo" class="largeButton">No</button>

        </div>

        <div id="invisible">
          <p>Ahorita me llegara un mensaje cuando obtenga tu respuesta :* <br>Te dedico esta canción:</p>
          <iframe width="420" height="315"
              src="http://www.youtube.com/embed/yWlHL_SlaQ4">
          </iframe>
        </div>

      </div>

    </div>
	</body>
	<script>

		var brd = document.getElementById("page")
		document.body.insertBefore(brd, document.getElementById("board"));

		const duration = 3000;
		const speed = 0.5;
		const cursorXOffset = 0;
		const cursorYOffset = -5;

		var hearts = [];

		function generateHeart(x, y, xBound, xStart, scale)
		{
			var heart = document.createElement("DIV");
			heart.setAttribute('class', 'heart');
			brd.appendChild(heart);
			heart.time = duration;
			heart.x = x;
			heart.y = y;
			heart.bound = xBound;
			heart.direction = xStart;
			heart.style.left = heart.x + "px";
			heart.style.top = heart.y + "px";
			heart.scale = scale;
			heart.style.transform = "scale(" + scale + "," + scale + ")";
			if(hearts == null)
				hearts = [];
			hearts.push(heart);
			return heart;
		}

		var down = false;
		var event = null;

		document.onmousedown = function(e) {
			down = true;
			event = e;
		}

		document.onmouseup = function(e) {
			down = false;
		}

		document.onmousemove = function(e) {
			event = e;
		}

		document.ontouchstart = function(e) {
			down = true;
			event = e.touches[0];
		}

		document.ontouchend = function(e) {
			down = false;
		}

		document.ontouchmove = function(e) {
			event = e.touches[0];
		}

		var before = Date.now();
		var id = setInterval(frame, 5);
		var gr = setInterval(check, 100);

		function frame()
		{
			var current = Date.now();
			var deltaTime = current - before;
			before = current;
			for(i in hearts)
			{
				var heart = hearts[i];
				heart.time -= deltaTime;
				if(heart.time > 0)
				{
					heart.y -= speed;
					heart.style.top = heart.y + "px";
					heart.style.left = heart.x + heart.direction * heart.bound * Math.sin(heart.y * heart.scale / 30) / heart.y * 200 + "px";
				}
				else
				{
					heart.parentNode.removeChild(heart);
					hearts.splice(i, 1);
				}
			}
		}

		function check()
		{
			if(down)
			{
				var start = 1 - Math.round(Math.random()) * 2;
				var scale = Math.random() * Math.random() * 0.8 + 0.2;
				var bound = 30 + Math.random() * 20;
				generateHeart(event.pageX - brd.offsetLeft + cursorXOffset, event.pageY - brd.offsetTop + cursorYOffset, bound, start, scale);
			}
		}

	</script>
</html>
